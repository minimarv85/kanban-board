# 2026-02-03 - Sales Dashboard Fixes

## CSV Parsing Bug Fixed
- **Issue**: CSV file WAS parsing correctly all along - the first row IS a real header
- **Root cause**: My earlier code was using hardcoded headers AND skipping the first row, treating header row as data
- **Fix**: Now reads actual header row from CSV and filters out non-WDJN references
- **File**: `SalesDashboard/index.html`

## Project Cards Simplified
- Removed: Value, Status, Created Date from cards
- Kept: WDJN Number, Customer, Site Address, Job Type

## Live Projects Count Fix
- Now counts ALL Live projects regardless of value
- 2 Live projects have "-" as value (WDJN00000, WDJN15642) - these now count
- Total: 26 Live projects

## CSV Format Confirmed
- Header row: `Total Enquiries Received,Job Type,Status,Client,Address Title, Project Quote Value ,Account Manager,Lead Generator,Won Date,Converted To Project Date,Quote Produced Date,Quote Due Date,Lead Notes,Date Created`
- Value column: `Project Quote Value` (note: has leading space in header)
- Date format: DD/MM/YYYY
- Date filter uses: `Date Created` column
- Reference format: WDJN followed by numbers

## Current Stats (02/02/2026 - 03/02/2026)
- Total Enquiries: 3
- Live Projects: 2
- Live Value: £999.30
- Pipeline Value: ~£7,050

## URLs
- Production: https://sales-dashboard-app-flax.vercel.app
- GitHub: https://github.com/minimarv85/sales-dashboard

---

## Barcode Scanning Test (Open Food Facts)

### Process Confirmed Working
1. User sends photo of product barcode via Telegram
2. I use `image` tool to extract barcode number from image
3. Query Open Food Facts API: `https://world.openfoodfacts.org/api/v0/product/{barcode}.json`
4. Parse JSON response for nutritional data, ingredients, allergens, additives

### Test Results
- **Test 1 (Nutella)**: Barcode 3017620422003 - Full nutritional data returned (539kcal/100g, allergens: milk, nuts, soybeans)
- **Test 2 (Quixo Gravy)**: Barcode 4088600227368 - Product found, partial data (no nutrition facts but ingredients present)

### Capabilities
- Extracts: calories, fat, saturated fat, carbs, sugars, proteins, salt, fiber
- Identifies: allergens, additives (E-numbers), processing level (NOVA group)
- Returns: product images, environmental data, brand info

### Use Cases
- Food tracking app integration
- Nutritional scanning assistant
- Allergen detection tool
